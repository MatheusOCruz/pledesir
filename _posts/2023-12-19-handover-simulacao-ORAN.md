---
layout: post
title: "Implementação de Estratégias de Handover em um Ambiente de Simulação para Open RAN"
author:
  Gabriel de C. Ferreira, 
    Priscila Solís Barreto,
    Eduardo A. P. Alchieri e
   Paulo H. P. de Carvalho
---
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Implementação de Estratégias de Handover em um Ambiente de Simulação para Open RAN</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    p {text-align: justify;}
    img {display : block;
         margin: 0 auto;}
    figcaption{ padding-left: 55px; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<header id="title-block-header">


</header>

 <div id="abstract">
        <p><strong>Abstract:</strong> <em>The Open RAN (O-RAN) architecture promotes the Radio Access Network (RAN) disaggregation, by using non-proprietary interfaces and introducing intelligent RAN controllers (RICs). The O-RAN presents several research challenges, primarily related to the RIC applications that optimize the RAN performance. Handover is a fundamental element defined in the O-RAN use cases. In this work, we study the O-RAN architecture and propose a mechanism of handover. The ns-3 simulator was updated to support the O-RAN handover process. Simulation results show that the handover can be managed remotely by the RIC without severely impacting the service. Alternatively, there is an excessive number of requests if the cell triggers the handover and offloads the target cell decision to the RIC.</em></p>
</div>

<div id="resumo">
    <p><strong>Resumo:</strong> <em>A arquitetura Open RAN (O-RAN) promove a desagregação das RANs através de interfaces não proprietárias e controladores inteligentes da RAN (RICs, em inglês). A O-RAN enfrenta vários desafios, principalmente relacionados às aplicações dos RICs que otimizam o desempenho da RAN. Neste artigo, apresentamos um estudo da arquitetura O-RAN e uma proposta de mecanismo de handover (HO), elemento fundamental em redes móveis. O handover O-RAN foi adicionado ao simulador ns-3. Os resultados de simulação mostram que o HO pode ser gerido pelo RIC, sem prejudicar severamente o serviço. Alternativamente, há sobrecarga do canal de controle caso a célula dispare o HO e o RIC decida a célula de destino.</em></p>
</div>
<h1 data-number="1" id="introdução"><span class="header-section-number">1</span> Introdução</h1>
<p>As novas gerações de redes móveis incorporaram estruturas de controle e gerenciamento em que alguns dos elementos-chave são os procedimentos e protocolos de gerenciamento e orquestração <span class="citation" data-cites="3GPP_5G_KPM">(3GPP 2021)</span>. Nas redes móveis, as implementações tradicionais de <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span> são soluções verticalmente integradas compostas de hardware e software proprietários. Em um cenário de <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span> aberta, a <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span> é desagregada e remontada em um conjunto de subsistemas interoperáveis com interfaces não proprietárias. A iniciativa O-RAN, liderada pela O-RAN Alliance<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, aborda esse paradigma ao propor o desenvolvimento de uma arquitetura padronizada para promover a desagregação horizontal e padronização de interfaces <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span>, de forma a viabilizar a interoperabilidade de equipamentos de vários fornecedores <span class="citation" data-cites="Polese2022UnderstandingOA">(Polese et al. 2022)</span>.</p>
<p>Espera-se que adoção da O-RAN tenha um impacto no mercado global de telecomunicações, aumentando o número de fornecedores, permitindo maior competição e inovação, além de redução de <span data-acronym-label="TCO" data-acronym-form="singular+short">TCO</span>, em torno de 30% no curto prazo <span class="citation" data-cites="open-ran-market">(Wypiór, Klinkowski, and Michalski 2022)</span>. Entretanto, existem vários desafios técnicos para a O-RAN se transformar em realidade, com destaque para o papel fundamental tanto dos controladores inteligentes da RAN, que empregam fluxos de trabalho embasados em aprendizagem de máquina, quanto dos microsserviços denominados <em>rApps</em> e <em>xApps</em>, que consistem em aplicações que dão suporte aos controladores na definição e execução de políticas de otimização e controle dos elementos da rede <span class="citation" data-cites="ORAN_ARCH">(O-RAN Alliance 2022a)</span>.</p>
<p>Nas redes móveis, o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> é considerado crítico para o gerenciamento de mobilidade, permitindo que um dispositivo troque sua conexão de uma célula para outra, idealmente sem interrupção <span class="citation" data-cites="Tayyab_2019">(Tayyab, Gelabert, and Jantti 2019)</span>. O uso de ondas milimétricas no 5G requer métodos de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> eficientes, dado que estas sofrem de maiores perdas, causando o aumento na taxa de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, de interrupções e de degradação do serviço <span class="citation" data-cites="3GPP_5G_KPM">(3GPP 2021)</span>. No caso da arquitetura O-RAN, a O-RAN Alliance especificou um total de 22 casos de uso e definiu a otimização do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> como um elemento fundamental para alguns destes, a saber  <span class="citation" data-cites="ORAN_usecased">(O-RAN Alliance 2022f)</span>: (a) gerenciamento dinâmico de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> baseado em contexto para <span data-acronym-label="V2X" data-acronym-form="singular+short">V2X</span>; (b) alocação dinâmica de recursos de rádio para <span data-acronym-label="UAV" data-acronym-form="plural+short">UAVs</span>; (c) otimização de direcionamento de feixe em <span data-acronym-label="MIMO" data-acronym-form="singular+short">MIMO</span> massivo; (d) gerenciamento e predição de congestionamento de tráfego; e (e) gerenciamento e otimização de consumo de energia.</p>
<p>Embora exista um forte interesse no avanço das especificações da O-RAN, o padrão ainda não está totalmente definido e existem muitos desafios técnicos ainda a serem extensamente avaliados <span class="citation" data-cites="Polese2022UnderstandingOA">(Polese et al. 2022)</span>. As plataformas de experimentação disponíveis ainda não estão maduras para avaliar os diferentes casos de uso <span class="citation" data-cites="testbeds1 testbed2">(Solis et al. 2022; Niknam et al. 2020)</span> definidos pela O-RAN Alliance. Grande parte das pesquisas atuais em O-RAN apresentam soluções ou resultados em ambientes de simulação restritos ou plataformas parcialmente adaptadas à arquitetura O-RAN <span class="citation" data-cites="BONATI2022109502 Polese2022UnderstandingOA">(Bonati et al. 2022; Polese et al. 2022)</span>, que em muitos casos, tem funcionalidades reduzidas e processos ainda complexos ou pouco documentados de instalação e configuração.</p>
<p>Com o objetivo de contribuir na pesquisa e desenvolvimento de aplicações nos controladores inteligentes da RAN e de facilitar a avaliação destas soluções, neste trabalho é proposta uma nova estratégia de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, desenvolvida em um ambiente de simulação adaptado dentro do simulador ns-3 <span class="citation" data-cites="LENA2014">(CTTC 2014)</span>, para o qual foram desenvolvidas as funcionalidades dos <span data-acronym-label="RIC" data-acronym-form="plural+short">RICs</span> e suas interfaces, conforme as especificações O-RAN. Dessa forma, este trabalho apresenta as seguintes contribuições científicas: (a) definição e avaliação de uma <em>xApp</em> para otimização do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> em uma arquitetura O-RAN, com análise comparativa de fontes de disparo e decisor, que possa ser útil ao padrão em desenvolvimento dessa arquitetura; (b) definição e implementação de um ambiente de simulação, de código aberto, que permita customizar de forma simples e prática a avaliação de <em>xApps</em> e <em>rApps</em> a serem executadas em <span data-acronym-label="RIC" data-acronym-form="plural+short">RICs</span> e suas interfaces, conforme as especificações O-RAN.</p>
<figure>
<img src="/source/handover/interfaces_proprietarias.png" id="fig:blocosran_a" alt="" />
</figure>
<figure>
<img src="/source/handover/interfaces_abertas.png" id="fig:blocosran_b" alt="" />
</figure>
<p>O restante deste artigo está organizado da seguinte forma. A Seção 2 apresenta a fundamentação teórica. A Seção 3 apresenta a proposta deste trabalho. A Seção 4 apresenta e analisa os resultados experimentais. Finalmente, a Seção 5 apresenta as conclusões e trabalhos futuros desta pesquisa.</p>
<h1 data-number="2" id="fundamentação-teórica"><span class="header-section-number">2</span> Fundamentação Teórica</h1>
<h2 data-number="2.1" id="elementos-da-arquitetura-o-ran"><span class="header-section-number">2.1</span> Elementos da Arquitetura O-RAN</h2>
<p>A RAN é composta por 6 blocos lógicos, que interligam os canais de controle e dados desde o núcleo 5G (<span data-acronym-label="AMF" data-acronym-form="singular+abbrv">AMF</span> e <span data-acronym-label="UPF" data-acronym-form="singular+abbrv">UPF</span>) até os <span data-acronym-label="UE" data-acronym-form="plural+short">UEs</span> <span class="citation" data-cites="ran-basic1">(Habibi et al. 2019)</span>. A Figura <a href="#fig:blocosran_a" data-reference-type="ref" data-reference="fig:blocosran">1</a> mostra a arquitetura da RAN do 5G conforme especificada pelo <span data-acronym-label="3GPP" data-acronym-form="singular+short">3GPP</span> <span class="citation" data-cites="3GPP_5G_KPM">(3GPP 2021)</span>. Os canais de controle entram na RAN pela camada de <span data-acronym-label="RRC" data-acronym-form="singular+short">RRC</span> utilizando a interface N2, responsável por gerenciar e supervisionar todas as conexões da RAN com o <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span>. A camada <span data-acronym-label="RRC" data-acronym-form="singular+short">RRC</span> é responsável por controlar (criar, modificar e eliminar) fatias da rede, controlar os algoritmos de agendamento e filas do envio de pacotes, controlar os recursos de rádio e alocação de banda para as fatias, realizar <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, entre outras funções. A camada <span data-acronym-label="RRC" data-acronym-form="singular+short">RRC</span> ainda controla alguns canais de sinalização, que trafegam na rede pelas interfaces lógicas de controle E1 e F1. Além dessas funções, a camada <span data-acronym-label="RRC" data-acronym-form="singular+short">RRC</span> também gera relatórios de performance de cada fatia, de forma a serem utilizados pelas instâncias superiores de orquestração da rede.</p>

<p>Os canais de dados chegam à RAN pela camada de <span data-acronym-label="PDCP" data-acronym-form="singular+short">PDCP</span>, que recebe e mapeia a fatia na qual os pacotes recebidos são pertencentes. Em sequência, os pacotes são cifrados e são encapsulados, para serem roteados para a camada <span data-acronym-label="RLC" data-acronym-form="singular+short">RLC</span>. Os pacotes de canais de controle provenientes do RRC também passam pela camada <span data-acronym-label="PDCP" data-acronym-form="singular+short">PDCP</span>. Ao receber os pacotes, o <span data-acronym-label="RLC" data-acronym-form="singular+short">RLC</span> separa os pacotes de dados, de sinalização e de controle da <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span>. Os pacotes de dados e de sinalização são mapeados ao seu canal e podem ser encaminhados para o <span data-acronym-label="MAC" data-acronym-form="singular+short">MAC</span> de forma transparente. Já os canais de controle da RAN são encaminhados para o MAC. Após o pacote de dados ou de sinalização chegar na camada <span data-acronym-label="MAC" data-acronym-form="singular+short">MAC</span>, este entrará na fila de transmissão relativo à sua fatia e será mapeado de acordo com o canal lógico e de transporte. Finalmente, a camada <span data-acronym-label="MAC" data-acronym-form="singular+short">MAC</span> envia o pacote para a camada física e de <span data-acronym-label="RF" data-acronym-form="singular+short">RF</span>, onde ocorre a modulação, multiplexação, direcionamento de feixe, entre outras operações. Por fim, o pacote chega na antena onde é encaminhado para o <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span>.</p>
<p>Em redes legadas, como o 4G, todos os blocos funcionais até a camada MAC, descritos anteriormente, eram implementados dentro de uma única estrutura física, denominada de <span data-acronym-label="BBU" data-acronym-form="singular+short">BBU</span>. Entretanto, o <span data-acronym-label="3GPP" data-acronym-form="singular+short">3GPP</span> sugeriu a divisão da BBU em duas unidades de processamento: a <span data-acronym-label="CU" data-acronym-form="singular+short">CU</span> e a <span data-acronym-label="DU" data-acronym-form="singular+short">DU</span>. Além desta divisão mais comum, o CU ainda pode ser dividido entre a parte de controle com a camada <span data-acronym-label="RRC" data-acronym-form="singular+short">RRC</span> (CU-CP) e a parte de dados com a camada <span data-acronym-label="PDCP" data-acronym-form="singular+short">PDCP</span> (CU-UP). Essa divisão é conhecida como split 7.2, pois a quebra ocorre logo após a camada <span data-acronym-label="PDCP" data-acronym-form="singular+short">PDCP</span>(Figura <a href="#fig:blocosran_a" data-reference-type="ref" data-reference="fig:blocosran_a">1</a>). A camada <span data-acronym-label="PDCP" data-acronym-form="singular+short">PDCP</span> possui funcionalidades de roteamento, logo pode estar conectado a vários <span data-acronym-label="RLC" data-acronym-form="plural+short">RLCs</span> ao mesmo tempo.</p>
<p>Para interligar os elementos <span data-acronym-label="DU" data-acronym-form="singular+short">DU</span> e <span data-acronym-label="CU" data-acronym-form="singular+short">CU</span>, o 3GPP definiu a interface lógica F1 (F1-c e F1-d para canais de controle e dados, respectivamente). Essa interface opera dentro da camada de transporte denominada <em>midhaul</em>. Já entre o DU e RU, tem-se a interface do <em>fronthaul</em>. A segunda divisão mais comum que ocorre na RAN do 5G é na camada física, conhecido como split 7.x. Neste split, parte das funcionalidades da camada física ficam no <span data-acronym-label="DU" data-acronym-form="singular+short">DU</span> (High-PHY) e parte no <span data-acronym-label="RU" data-acronym-form="singular+short">RU</span> (Low-PHY). Quando ambos splits são realizados, a rede é denominada rede split 7.2x. Apesar disto, muitas empresas que vendem equipamentos de RAN ainda utilizam interfaces ou extensões proprietárias no <em>midhaul</em> e <em>fronthaul</em><span class="citation" data-cites="Gabriel_2021">(Gabriel and Kompany 2021)</span>, impedindo a interoperabilidade de equipamentos de diferentes fabricantes.</p>
<p>A Figura <a href="#fig:blocosran_b" data-reference-type="ref" data-reference="fig:blocosran">2</a> mostra a proposta O-RAN, que define interfaces abertas para permitir a interoperabilidade dos blocos lógicos da <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span> e também da plataforma de controle e gerenciamento da <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span>. Dessa forma, a O-RAN não é uma nova tecnologia em si, mas uma proposta de combinação de tecnologias existentes que permitem o desenvolvimento de componentes tecnológicos que se comunicam por meio de interfaces abertas e padronizadas. As interfaces entre os elementos são padronizadas de acordo com a arquitetura e especificações da O-RAN Alliance, o que permite que os componentes de hardware e software sejam fornecidos por diferentes fabricantes.</p>
<p>É importante notar na Figura <a href="#fig:blocosran_b" data-reference-type="ref" data-reference="fig:blocosran_b">2</a> que a O-RAN incluiu dois <span data-acronym-label="RIC" data-acronym-form="plural+short">RICs</span>. O primeiro <span data-acronym-label="RIC" data-acronym-form="singular+short">RIC</span> atua no controle da célula em intervalos próximos de tempo real e é chamado de <em>Near Real-Time</em> ou <em>near-RT</em> <span data-acronym-label="RIC" data-acronym-form="singular+short">RIC</span>. Esta atuação se dá por meio de decisões que tipicamente seriam tomadas nos diversos blocos lógicos que compõem a RAN, como: alocação de recursos, controle de acesso, troca de célula primária por meio de <em>handover</em>, dentre outros. O segundo <span data-acronym-label="RIC" data-acronym-form="singular+short">RIC</span> tem atuação de controle em intervalos mais longos de tempo que não tempo real, e é chamado de <em>Non Real-Time</em> ou <em>non-RT</em> <span data-acronym-label="RIC" data-acronym-form="singular+short">RIC</span>. A atuação do <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> se dá por meio do monitoramento do desempenho, da configuração das políticas executadas pelo <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>, e do treinamento de modelos baseados em aprendizagem de máquina. Esses dois elementos são propostos para a implementação de controles com laço fechado, utilizando dados coletados e fluxos de trabalho de inteligência artificial para a tomadas de decisão<span class="citation" data-cites="BONATI2022109502">(Bonati et al. 2022)</span>.</p>
<h2 data-number="2.2" id="controladores-inteligentes-da-ran"><span class="header-section-number">2.2</span> Controladores Inteligentes da RAN</h2>
<p>O <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span>, como elemento de orquestração e gerenciamento de serviços possui uma visão geral da RAN, por meio da coleta e da análise de dados dos diferentes elementos que a compõem. Com o apoio dos <em>rApps</em>, fornece, em escala de tempo superior a 1 segundo, gerenciando a configuração dos elementos da RAN e políticas de controle do <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>, por meio da interface A1. Também fornece informações de enriquecimento, modelos e gerenciamento de modelos de IA/ML para o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>, que, por sua vez, retroalimenta o <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> com informações relacionadas às políticas implantadas. O <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span>, portanto, serve como uma plataforma de software para <em>rApps</em> e para a otimização de alto nível da RAN, no que concerne a gerenciamento e controle da rede de acesso via rádio <span class="citation" data-cites="Dryja_ski_2021 lacava2022programmable">(Dryjański, Kułacz, and Kliks 2021; Lacava et al. 2022)</span>.</p>
<p>O <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> é uma plataforma de software que permite o controle dos elementos da RAN por meio de <em>xApps</em>. Permite a otimização de controle dos elementos da RAN em escala de tempo entre 10 ms e 1 segundo, por meio da interface E2. Os <em>xApps</em> são capazes de otimizar o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, monitorar os enlaces de rádio, gerenciar mobilidade de usuários, balancear carga de tráfego de dados, atualizar políticas de fatiamento de rede, realizar <em>traffic steering</em> e gerenciamento de interferências. A interface E2 consiste em um ciclo fechado dentro do domínio RAN, sendo usada a partir do <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> para enviar informações de controle e de políticas do RIC aos nós pela interface E2 e para obter retroalimentação desses nós para o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> <span class="citation" data-cites="Dryja_ski_2021 ORAN_ARCH">(Dryjański, Kułacz, and Kliks 2021; O-RAN Alliance 2022a)</span>.</p>
<p>Os <em>xApps</em> são microsserviços empregados para o gerenciamento de recursos de rádio por meio de interfaces padronizadas <span class="citation" data-cites="ORAN_ARCH">(O-RAN Alliance 2022a)</span>. A partir de dados de desempenho medidos na RAN, os <em>xApps</em> são capazes de realizar ações de controle na própria RAN. É importante ressaltar que apesar de fazer parte do <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>, os <em>xApps</em> são estruturas independentes, podendo ser fornecidas por terceiros. Por sua vez, os <em>rApps</em> são microsserviços projetados para serem executados no <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> e, portanto, fazem parte do plano de gerenciamento e controle. Os <em>xApps</em> e <em>rApps</em> possuem conceitos semelhantes, porém operam em escalas de tempo diferentes, enquanto um <em>xApp</em> é capaz de controlar diretamente uma função interna a elementos da RAN, um <em>rApp</em> é usado no <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> para apoiar na criação de políticas, que influenciam indiretamente elementos da RAN.</p>
<h2 data-number="2.3" id="estratégias-de-handover-na-o-ran"><span class="header-section-number">2.3</span> Estratégias de <em>handover</em> na O-RAN</h2>
<p>Para ampliar a eficiência espectral da rede 5G, é possível diminuir a cobertura das estações rádio base/<span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span> e melhorar o reaproveitamento de frequência. No entanto, essa densificação aumenta a taxa de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, ou seja, a mudança sucessiva de <span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span> para um usuário em movimento.</p>
<p>A mobilidade nas redes celulares pode ser identificada em dois cenários: o primeiro quando a <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> está em IDLE_MODE e deve selecionar uma célula, e o segundo quando a <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> está em CONNECTED_MODE e identifica uma célula que atende melhor do que a célula atual e executa o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>. Nas tecnologias 4G e 5G, tem-se utilizado para o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> um esquema <em>break-before-make</em>, entretanto por serem redes ultradensas, não há tempo para sinalização extensa de HO, o que impõe a necessidade de procedimentos <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> mais eficientes <span class="citation" data-cites="Tayyab_2019">(Tayyab, Gelabert, and Jantti 2019)</span>.</p>
<p>Conforme definido pelo 3GPP, o mínimo de informação requerida para determinar a necessidade do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> é o conjunto de medições de potências recebidas pelo <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> dos diversos <span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span> em suas proximidades <span class="citation" data-cites="3GPP_4G_RRC">(3GPP 2022)</span>. As diferentes técnicas de disparo de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> usam então o histórico de medição de potências, e também <span data-acronym-label="KPM" data-acronym-form="plural+short">KPMs</span>, para decidir que <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> deve ser transferida via <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> para outro canal, chamada intra-gNB <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, ou outra célula, chamada inter-gNB <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>.</p>
<p>Um modelo eficiente de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> tem o objetivo de atribuir a cada <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> o acesso a um <span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span> adequado, de modo a maximizar a vazão. As redes convencionais 3GPP implementam a técnica de disparo de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> de maneira distribuída, em que cada <span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span> toma decisões para os <span data-acronym-label="UE" data-acronym-form="plural+short">UEs</span> a ele conectados com base na frequência de certos eventos, como os disparados quando a potência recebida pelo UE de <span data-acronym-label="gNB" data-acronym-form="plural+short">gNBs</span> vizinhos e seu <span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span> primário seja maior ou menor que um limiar configurável, podendo contar também com histerese. Esses eventos são chamados pelo 3GPP de A2, A3 e A4 <span class="citation" data-cites="3GPP_4G_RRC">(3GPP 2022)</span>. A dependência exclusiva nestes eventos para controlar o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> pode resultar no aumento de sua frequência, resultando em degradação do serviço.</p>
<p>Na arquitetura O-RAN, com a desagregação das funções dos <span data-acronym-label="gNB" data-acronym-form="singular+short">gNB</span>, uma implantação massiva leva a uma arquitetura "sem células". A otimização do controle de acesso do usuário pode ser inviável devido à sobrecarga e à complexidade da sinalização. Portanto, o disparo dos <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span> pode ser centralizado nos controladores inteligentes que possuem uma visão global da <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span>. Um exemplo disso é a possibilidade de o <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> identificar sequências de <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span> que causam degradação do serviço, aprender melhores alternativas por meio de um modelo de <span data-acronym-label="ML" data-acronym-form="singular+short">ML</span> treinado, que depois é utilizado por <span data-acronym-label="near-RT RIC" data-acronym-form="plural+short">near-RT RICs</span> que monitoram a mobilidade em tempo real de <span data-acronym-label="UE" data-acronym-form="plural+short">UEs</span> e previnem que haja degradação do serviço devido a <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span> indesejados.</p>
<p>Um outro exemplo é a aplicação do conceito de <span data-acronym-label="SON" data-acronym-form="singular+short">SON</span> e <span data-acronym-label="MBL" data-acronym-form="singular+short">MBL</span> conforme definida pelo <span data-acronym-label="3GPP" data-acronym-form="singular+short">3GPP</span> para melhorar a experiência do usuário, ao equilibrar a carga por meio da otimização dos gatilhos de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>. O <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> pode monitorar a experiência do usuário por medições na <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> e a utilização de recursos. O <span data-acronym-label="non-RT RIC" data-acronym-form="singular+short">non-RT RIC</span> avalia o desempenho em função dos requisitos de nível de serviço esperados. Por meio dos <span data-acronym-label="RIC" data-acronym-form="plural+short">RICs</span> na arquitetura O-RAN, as estatísticas de qualidade de serviço da rede de rádio podem ser utilizadas para melhorar o desempenho da rede e da experiência do usuário ao otimizar o disparo de <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span>.</p>
<h2 data-number="2.4" id="desafios-e-trabalhos-relacionados"><span class="header-section-number">2.4</span> Desafios e Trabalhos Relacionados</h2>
<p>Algumas redes O-RAN já foram implantadas comercialmente, quando não precisam lidar com a interoperabilidade de sistemas legados. Nessas redes O-RAN, grande parte das operadoras tem habilitado as interfaces parcialmente e muitas não incluem ainda o <span data-acronym-label="RIC" data-acronym-form="singular+short">RIC</span>, dado que a arquitetura O-RAN ainda está em fase de especificação e avaliação <span class="citation" data-cites="ORAN_trials">(TECKNEXUS 2022)</span>.</p>
<p>Na pesquisa acadêmica, propostas de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> para O-RAN por meio de <em>xApps</em> também são recentes. No trabalho de <span class="citation" data-cites="Kumar_2020">(Kumar, Sapru, and Jaisawal 2020)</span>, os autores definem para uma rede O-RAN a aplicação do conceito de <em>Automatic Neighbor Relation</em> (ANR) proativa com o suporte de modelos inteligentes baseada em <span data-acronym-label="ML" data-acronym-form="singular+short">ML</span> para melhorar os <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span> em <span data-acronym-label="gNB" data-acronym-form="plural+short">gNBs</span>. Entretanto, o trabalho é restrito à uma proposta e sua arquitetura, sem demonstração em uma plataforma experimental. Em <span class="citation" data-cites="Cao_2022">(Cao et al. 2022)</span>, os autores propõem um esquema inteligente de controle de acesso de usuário com aprendizado por reforço profundo para o <span data-acronym-label="RIC" data-acronym-form="singular+short">RIC</span> em um ambiente federado. O modelo mostra uma maximização da vazão em cada <span data-acronym-label="UE" data-acronym-form="singular+short">UE</span> e diminuição de <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span> frequentes. Embora a proposta como método de otimização tem um forte potencial de ser integrada à padronização da O-RAN, a avaliação foi realizada em um simulador customizado, sem integração a uma rede móvel O-RAN. De maneira similar, os autores em <span class="citation" data-cites="Haryo_Prananto_2022">(Prananto, Iskandar, and Kurniawan 2022)</span>, propõem um algoritmo de <span data-acronym-label="ML" data-acronym-form="singular+short">ML</span> para <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> que mostra melhor desempenho em comparação a algoritmos tradicionais e que poderia ser implementado em um <em>xApp</em>. Entretanto, os resultados experimentais são restritos à implementação de uma rede neural em MATLAB e a um protótipo de um <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> usando vetores autorregressivos nesse mesmo ambiente. O trabalho de <span class="citation" data-cites="Papa_2022">(Papa et al. 2022)</span> realiza uma investigação do efeito do plano de controle de uma <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span> definida por software no desempenho do plano de usuário, com o uso de um simulador feito a partir da modelagem do comportamento de controladores (<span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>) de código aberto. Os resultados mostram que o uso de um único <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> pode ser sobrecarregado caso haja um número excessivo de <span data-acronym-label="UE" data-acronym-form="plural+short">UEs</span> sendo controlados. A distribuição de requisições de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> entre diversos controladores melhora o desempenho do usuário em pelo menos 20% para vazão e 140% para atraso em comparação com uma abordagem de controlador único.</p>
<p>Dentre os trabalhos citados, todos utilizaram simuladores com modelagens simplificadas de uma rede 3GPP e de um RIC. Isto é esperado, vide a curva de aprendizado, complexidade e recursos computacionais necessários para a montagem de uma rede real ou emulada, e a indisponibilidade de um simulador de código aberto. Recentemente, foi apresentada a versão inicial de um módulo que serve de interface entre um <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> real e a RAN simulada dentro do simulador ns-3 <span class="citation" data-cites="lacava2022programmable">(Lacava et al. 2022)</span>, com o objetivo de reduzir a barreira de acesso à pesquisa com O-RAN. Diferentemente de <span class="citation" data-cites="lacava2022programmable">(Lacava et al. 2022)</span>, colocamos também o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> e <em>xApps</em> dentro da simulação, permitindo maior agilidade no desenvolvimento, depuração, testes e experimentação. A utilização de um simulador com modelagem mais precisa das diversas camadas de rede da pilha LTE também traz mais realismo às simulações, expondo comportamentos inesperados decorrentes, por exemplo, de enfileiramento, falhas de transmissão e interferências.</p>
<h1 data-number="3" id="proposta-de-implementação-de-uma-solução-de-handover-na-arquitetura-o-ran"><span class="header-section-number">3</span> Proposta de Implementação de uma Solução de <em>handover</em> na Arquitetura O-RAN</h1>
<p>Conforme as especificações da O-RAN Alliance <span class="citation" data-cites="ORAN_E2GAP">(O-RAN Alliance 2022e)</span>, a intervenção do <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> no procedimento de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> se dá de duas formas. Na primeira, o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> é disparado pelo eNB (equivalente do gNB em uma rede 4G), através de uma mensagem <em>RIC Indication</em> <span class="citation" data-cites="ORAN_E2GAP ORAN_E2SM_RC">(O-RAN Alliance 2022e, 2022d)</span>, como mostrado na Figura <a href="#fig:enb_initiated_handover" data-reference-type="ref" data-reference="fig:enb_initiated_handover">3</a>. Na segunda, o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> é disparado pelo próprio RIC ou algum de seus <em>xApps</em>. Como o comportamento interno do RIC e <em>xApps</em> não é padronizado pela O-RAN Alliance, utilizamos a mesma mensagem usada na primeira forma, porém partindo do <em>xApp</em> e com endereço de origem do eNB (<em>spoofing</em>) que iniciará o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, como mostrado na Figura <a href="#fig:xapp_initiated_handover" data-reference-type="ref" data-reference="fig:xapp_initiated_handover">4</a>.</p>
<figure>
<img src="/source/handover/EnbInitiatedHandoverProcedureSequenceDiagram.png" id="fig:enb_initiated_handover" style="width:85.0%" alt="" /><figcaption><em>handover</em> disparado pelo eNodeB</figcaption>
</figure>
<figure>
<img src="/source/handover/XappInitiatedHandoverProcedureSequenceDiagram.png" id="fig:xapp_initiated_handover" style="width:85.0%" alt="" /><figcaption><em>handover</em> disparado pelo <em>xApp</em> do <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span></figcaption>
</figure>
<p>Após o recebimento do RIC Indication, o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> aceita (RIC decision=Accept) por padrão os pedidos, a menos que um <em>xApp</em> associado ao serviço requerido (<em>Handover Control</em> neste caso) esteja registrado. Caso haja um <em>xApp</em>, ele é inquerido sobre o pedido, podendo aceitar (RIC decision=Accept) ou rejeitar a requisição (RIC decision=Reject). Nos casos em que a requisição de controle é aceita, escolhe-se também a decisão tomada. No caso do <em>Handover Control</em>, esta decisão é a célula de destino para a qual um UE deve ser transferido. Tanto a aceitação da requisição de controle quanto a decisão sobre a célula de destino são enviadas de volta ao eNB por meio de uma ordem de controle encapsulada em um <em>RIC Control Request</em>.</p>
<p>As soluções de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> implementadas são: a A2A4, padrão do ns-3; e duas soluções propostas neste trabalho, uma baseada em K-Means e outra no MaxRsrq, sendo RSRQ a sigla em inglês para a Qualidade Recebida do Sinal de Referência, métrica similar à Relação Sinal-Ruído (SNR). Em todos os casos, quando a célula origem e a de destino forem a mesma, o disparo do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> é cancelado. A estratégia MaxRsrq (Equação <a href="#eq:maxrsrq" data-reference-type="ref" data-reference="eq:maxrsrq">[eq:maxrsrq]</a>) seleciona como célula de destino para um UE, <span class="math inline">\(x\)</span>, a célula cujo valor de potência medido é máximo (<span class="math inline">\(argmax\)</span>) dentre os valores medidos pelo UE (<span class="math inline">\(y(x)\)</span>). A estratégia A2A4 (Equação <a href="#eq:a2a4" data-reference-type="ref" data-reference="eq:a2a4">[eq:a2a4]</a>) também se comporta como o MaxRsrq, exceto quando a diferença entre a potência recebida da célula de destino, <span class="math inline">\(b\)</span>, e da célula atual, <span class="math inline">\(a\)</span>, são inferiores a um limiar <span class="math inline">\(t\)</span>, onde o disparo do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> é cancelado. Finalmente, a estratégia do K-Means (Equação <a href="#eq:kmeans" data-reference-type="ref" data-reference="eq:kmeans">[eq:kmeans]</a>) busca a célula <span class="math inline">\(x\)</span> com menor valor (<span class="math inline">\(argmin\)</span>) de distância <span class="math inline">\(d_i\)</span> até uma das <span class="math inline">\(k\)</span> centroides <span class="math inline">\(c_i\)</span> encontradas pelo K-Means, representando as diferentes células da <span data-acronym-label="RAN" data-acronym-form="singular+short">RAN</span>. O K-Means é refeito periodicamente, a partir das medições mais recentes de todos os UEs conectados na rede.</p>
<p><span class="math display">\[\label{eq:maxrsrq}
    maxRsrqTargetCell(x) = arg max(y(x))\]</span></p>
<p><span class="math display">\[\begin{gathered}
\label{eq:a2a4}
a2a4TargetCell(x) =   \begin{cases} maxRsrqTargetCell(x) &amp; \text{se $(b-a)&gt;t$}\\
                                     -1 &amp; \text{caso contrário} 
                      \end{cases}\end{gathered}\]</span></p>
<p><span class="math display">\[\begin{gathered}
\label{eq:kmeans}
    kmeansTargetCell(x) = arg min( (d_i(y(x), c_i))\forall i \in [0, k])\end{gathered}\]</span></p>
<p>Quando o eNB recebe a ordem de controle, ele executa o comando, seja para interromper um <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> potencial, seja para iniciá-lo. As mensagens de confirmação ou erro da finalização da ordem de controle ainda não foram implementadas, utilizando-se eventos do próprio simulador para avaliar o sucesso dos procedimentos.</p>
<p>Foram implementadas a infraestrutura publicador-subscritor requerida pela especificação da O-RAN em <span class="citation" data-cites="ORAN_E2AP">(O-RAN Alliance 2022b)</span>. Seguida de sua especialização na forma de <em>xApps</em> e aplicações que implementam o Protocolo de Aplicação E2 (E2AP), permitindo comunicação do <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> com <em>xApps</em> e com nós E2 (eNB, gNB, CU, DU). No simulador, as aplicações E2AP são instaladas nos nós E2 (eNB) e se registram ao RIC. O funcionamento das camadas do eNB é inalterado, chamando condicionalmente a implementações do E2AP para envio de <span data-acronym-label="KPM" data-acronym-form="plural+short">KPMs</span> ou realizar requisições de controle para o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>. As requisições de controle têm fácil implementação, uma vez que o simulador pode enviar a requisição para o RIC e reagendar o evento de controle atual para o futuro, onde se espera ter obtido a resposta do RIC.</p>
<p>Na aplicação E2AP, foram implementadas as seguintes mensagens, conforme <span class="citation" data-cites="ORAN_E2AP">(O-RAN Alliance 2022b)</span>: RIC Subscription Request/Response/Failure, RIC Subscription Delete Request/Response/Failure, RIC Control Request, E2 Node Configuration Update/Acknowledge/Failure, RIC Indication. Acima das mensagens definidas pelo E2AP, foram implementados os serviços de coleta periódica das <span data-acronym-label="KPM" data-acronym-form="plural+short">KPMs</span> requeridas pelo processo de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> segundo <span class="citation" data-cites="3GPP_4G_KPM ORAN_E2SM_KPM">(3GPP 2017; O-RAN Alliance 2022c)</span> e parte do E2SM-KPM: HO.SrcCellQual.RSRP, HO.SrcCellQual.RSRQ, HO.TrgtCellQual.RSRP e HO.TrgtCellQual.RSRQ. Foram também implementados os serviços relativos ao <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, parte do E2SM-RC, conforme <span class="citation" data-cites="ORAN_E2SM_RC">(O-RAN Alliance 2022d)</span>.</p>

<h1 data-number="4" id="análise-de-simulações"><span class="header-section-number">4</span> Análise de Simulações</h1>
<h2 data-number="4.1" id="cenários-de-simulação"><span class="header-section-number">4.1</span> Cenários de Simulação</h2>
<p>A topologia do cenário de simulação (Figura <a href="#fig:simulation_topology" data-reference-type="ref" data-reference="fig:simulation_topology">5</a>) permite avaliar o desempenho do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> inter-eNBs subordinados a uma mesma <span data-acronym-label="MME" data-acronym-form="singular+short">MME</span> <span class="citation" data-cites="Tayyab_2019">(Tayyab, Gelabert, and Jantti 2019)</span>, executados através da interface X2. O cenário é composto por três <span data-acronym-label="eNB" data-acronym-form="plural+short">eNBs</span> (vermelho) dispostos de maneira equidistante. Os componentes do núcleo da rede LTE (PGW, SGW, MME) são mostrados em azul na lateral superior esquerda. O <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> e seus <em>xApps</em> foram instalados no <span data-acronym-label="SGW" data-acronym-form="singular+short">SGW</span>. Os seis <span data-acronym-label="UE" data-acronym-form="plural+short">UEs</span> (verde) são separados em dois grupos, traçando movimentos triangulares dentro e fora do triângulo formado pelos <span data-acronym-label="eNB" data-acronym-form="plural+short">eNBs</span>. As velocidades de movimentação foram escolhidas conforme indicado em <span class="citation" data-cites="IMT_2020">(ITU 2017)</span>. Pedestres, <span class="math inline">\(\leq10 km/h\)</span>, são representados pelos UE0 (<span class="math inline">\(0.2m/s\)</span>) e UE1 (<span class="math inline">\(1m/s\)</span>). Veículos, <span class="math inline">\(\leq120 km/h\)</span>, são representados pelos UE2 (<span class="math inline">\(5m/s\)</span>), UE3 (<span class="math inline">\(10m/s\)</span>), UE4 (<span class="math inline">\(5m/s\)</span>) e UE5 (<span class="math inline">\(30m/s\)</span>).</p>
<figure>
<img src="/source/handover/SimulationTopologyUpdated.png" id="fig:simulation_topology" style="width:80.0%" alt="" /><figcaption  style="padding-left: 75px">Topologia simulada</figcaption>
</figure>
<p>São comparados seis cenários distintos. O primeiro cenário é composto de uma rede LTE padrão, sem interferência do RIC. Neste caso, as decisões de <span data-acronym-label="HO" data-acronym-form="plural+short">HOs</span> são tomadas pelo algoritmo de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> do <span data-acronym-label="eNB" data-acronym-form="singular+short">eNB</span> e executadas imediatamente. Todos os cenários seguintes são compostos de redes LTE com O-RAN. O segundo, terceiro e quarto cenários seguem o comportamento mostrado na Figura <a href="#fig:enb_initiated_handover" data-reference-type="ref" data-reference="fig:enb_initiated_handover">3</a>, com disparos de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> iniciados pelo <span data-acronym-label="eNB" data-acronym-form="singular+short">eNB</span>. No segundo cenário, a decisão que seria feita por um <em>xApp</em> é substituída pela sugestão feita pelo próprio <span data-acronym-label="eNB" data-acronym-form="singular+short">eNB</span> na mensagem de disparando do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>. No terceiro e quarto cenários, dois <em>xApps</em> desenvolvidos escolhem a decisão da célula de destino baseado em suas políticas internas, ou rejeitam o pedido de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, impedindo que o <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> seja iniciado. O quinto e sexto cenários tem os <em>xApps</em> como fontes de disparo do <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, conforme mostrado na Figura <a href="#fig:xapp_initiated_handover" data-reference-type="ref" data-reference="fig:xapp_initiated_handover">4</a>.</p>
<h2 data-number="4.2" id="métricas-de-avaliação-do-desempenho-e-confiança-estatística"><span class="header-section-number">4.2</span> Métricas de Avaliação do Desempenho e Confiança Estatística</h2>
<p>As métricas avaliadas são o número de disparos efetuados (requisições de controle do RIC) e disparos cancelados (requisições de controle rejeitadas), utilizados para avaliar a eficiência do uso do canal de controle. O número de <em>handovers</em> iniciados e concluídos também foram analisados para avaliar se os <em>handovers</em> estão sendo executados corretamente e em tempo hábil. Por fim, o número de conexões estabelecidas foi obtido para indicar se houve perda de conexão, devido à falta de um <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>.</p>
<p>As simulações foram executadas 20 vezes para cada cenário, com <em>seeds</em> gerados aleatoriamente. Os resultados serão mostrados com as margens de erro para um intervalo de confiança de 95%. As simulações têm duração de 10 minutos, com uma transmissão por UE a cada 1 segundo, mantendo uma conexão ativa com um servidor remoto.</p>
<h2 data-number="4.3" id="resultados-e-discussões"><span class="header-section-number">4.3</span> Resultados e Discussões</h2>
<p>Os resultados coletados nas simulações estão dispostos na  <a href="#tab:resultados" data-reference-type="ref" data-reference="tab:resultados">Tabela</a>. A primeira linha é o caso de referência, sem O-RAN. Neste caso, o número de <em>handovers</em> iniciados foi estável em todas as simulações. O número de conexões estabelecidas foi de apenas 6, sendo uma por UE, conforme esperado. A segunda linha, já com o RIC sendo adicionado e aumentando a latência até o início dos <em>handovers</em> em aproximadamente 10 ms não causou nenhuma diferença no número de <em>handovers</em> concluídos ou conexões estabelecidas. É um resultado interessante que mostra que o atraso de comunicação com o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> não deve impactar, por si só, no desempenho da RAN.</p>
<div id="tab:resultados" markdown="1">

| Fonte do Disparo | Decisor          | Disparos Efetuados | Disparos Cancelados | Handovers Iniciados | Handovers Concluídos | Conexões Restabelecidas |
|-------------------|------------------|---------------------|----------------------|----------------------|------------------------|--------------------------|
|                   | eNB              |                   - |                    - |         30±0         |           30±0         |            0±0           |
| eNB               | RIC+eNB          |            30±0     |                    0 |         30±0         |           30±0         |            0±0           |
| eNB               | *xApp* + K-Means |      1802±102      |        1784±102       |         17±1         |           17±1         |          24±1            |
| eNB               | *xApp* + MaxRsrq |       1528±90      |         1512±90       |         16±0         |           16±0         |          18±1            |
| RIC               | *xApp* + K-Means |         125±24     |                    0 |        122±24        |          122±24        |         134±25           |
| RIC               | *xApp* + MaxRsrq |           18±1     |                    0 |          18±1        |            18±1        |           20±0           |


</div>
<p>Na terceira linha, temos os resultados de um dos <em>xApps</em> construídos utilizando a técnica K-Means de <span data-acronym-label="ML" data-acronym-form="singular+short">ML</span>. Neste caso, o número de disparos e cancelamentos é grande. Isto ocorre porque o eNB está acionando o RIC de acordo com a política do algoritmo A2A4, usado também nos dois primeiros cenários, mas o <em>xApp</em> julga o <em>handover</em> desnecessário em razão de sua política interna baseada no K-Means. Para uso eficiente do canal de controle entre nós E2 e <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span>, é necessário que ambas as políticas sejam coincidentes ou que o RIC tome as decisões sem ser acionado pelo eNB, como veremos adiante nos quinto e sexto cenários. Ainda neste terceiro cenário, o número de <em>handovers</em> iniciados e concluídos é menor que o caso de referência, porém o número médio de conexões reestabelecidas é próximo de 5 vezes por UE, indicando a interrupção do serviço por 4 vezes durante os 10 minutos simulados.</p>
<p>Na quarta linha, temos os resultados de outro cenário com um <em>xApp</em>, desta vez utilizando apenas o máximo Rsrq das células vizinhas ao UE que se deseja fazer <em>handover</em>. O número de disparos e cancelamentos continua alto, pelo mesmo motivo do caso anterior. O número de <em>handovers</em> iniciados e concluídos é menor, porém o número de conexões reestabelecidas também é menor, indicando superioridade à política do K-Means, ainda que seja pior que a política do A2A4 do caso de referência.</p>
<p>Na quinta linha, o resultado do <em>xApp</em> com K-Means mostra a forte redução do número de disparos de <em>handover</em>. Isto se deve a fonte do disparo, que deixa de ser o eNB conectado ao UE e passa a ser o próprio <em>xApp</em>. Por outro lado, o <em>xApp</em> iniciou mais <em>handovers</em>, devido à instabilidade do K-Means implementado e a falta de um intervalo de guarda ou algoritmo de saturação. A instabilidade resultou no efeito ping-pong, onde o <em>handover</em> era feito consecutivamente entre um conjunto de eNBs.</p>
<p>Na sexta e última linha, o resultado do <em>xApp</em> com MaxRsrq mostra uma redução ainda maior do número de <em>handovers</em> disparados e iniciados. Esta redução, porém, não se reflete no número de conexões restabelecidas, que também estão aumentadas quando comparada ao caso de referência.</p>
<h1 data-number="5" id="conclusões"><span class="header-section-number">5</span> Conclusões</h1>
<p>Este trabalho apresentou um estudo a respeito da arquitetura O-RAN e mecanismos de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>. Os resultados obtidos nos permitem concluir que o <span data-acronym-label="near-RT RIC" data-acronym-form="singular+short">near-RT RIC</span> proposto pela O-RAN Alliance não afeta negativamente o desempenho do procedimento de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span> inter-eNB para velocidades compatíveis com pedestres e veículos. Também é possível afirmar que, caso o eNB seja a fonte dos disparos de <span data-acronym-label="HO" data-acronym-form="singular+short">HO</span>, o mesmo deve ser configurado com a mesma política implementada pelo <em>xApp</em> no RIC para que haja uso eficiente do canal de controle. Já no caso do <em>xApp</em> atuar disparando <em>handovers</em>, é necessária uma implementação de política temporalmente estável, evitando o efeito ping-pong.</p>
<p>Como trabalhos futuros, planeja-se implementar novos <em>xApps</em> experimentando políticas com maior longo prazo, como por exemplo mantendo histórico de células próximas e suas potências percebidas por um UE ao longo de dias, permitindo a antecipação de seus movimentos.</p>
<h1 class="unnumbered" data-number="" id="agradecimentos">Agradecimentos</h1>
<p>Este projeto foi apoiado pelo Ministério da Ciência, Tecnologia e Inovações, com recursos da Lei nº 8.248, de 23 de outubro de 1991, no âmbito do PPI-SOFTEX, coordenado pela Softex e publicado Residência em TIC 08, DOU 01245.014045/2022-75. Também foi apoiado pela ANATEL, através do TED OpenRAN com a UnB, e pela FAP-DF, através do projeto PLEDESIR.</p>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-3GPP_4G_KPM">
<p>3GPP. 2017. “Performance measurements Evolved Universal Terrestrial Radio Access Network (E-UTRAN) - 3GPP TS 32.425 version 14.1.0 Release 14.” <a href="https://www.etsi.org/deliver/etsi_TS/132400_132499/132425/14.01.00_60/ts_132425v140100p.pdf">https://www.etsi.org/deliver/etsi_TS/132400_132499/132425/14.01.00_60/ts_132425v140100p.pdf</a>.</p>
</div>
<div id="ref-3GPP_5G_KPM">
<p>———. 2021. “5G performance measurements - 3GPP TS 28.552 version 16.10.0 Release 16.” <a href="https://www.etsi.org/deliver/etsi_ts/128500_128599/128552/16.10.00_60/ts_128552v161000p.pdf">https://www.etsi.org/deliver/etsi_ts/128500_128599/128552/16.10.00_60/ts_128552v161000p.pdf</a>.</p>
</div>
<div id="ref-3GPP_4G_RRC">
<p>———. 2022. “Performance measurements Evolved Universal Terrestrial Radio Access Network (E-UTRAN) - 3GPP TS 36.331 version 17.2.0 Release 17.” <a href="https://www.etsi.org/deliver/etsi_ts/136300_136399/136331/17.02.00_60/ts_136331v170200p.pdf">https://www.etsi.org/deliver/etsi_ts/136300_136399/136331/17.02.00_60/ts_136331v170200p.pdf</a>.</p>
</div>
<div id="ref-BONATI2022109502">
<p>Bonati, Leonardo, Michele Polese, Salvatore D’Oro, Stefano Basagni, and Tommaso Melodia. 2022. “OpenRAN Gym: AI/Ml Development, Data Collection, and Testing for O-Ran on Pawr Platforms.” <em>Computer Networks</em>, 109502. <a href="https://doi.org/https://doi.org/10.1016/j.comnet.2022.109502">https://doi.org/https://doi.org/10.1016/j.comnet.2022.109502</a>.</p>
</div>
<div id="ref-Cao_2022">
<p>Cao, Yang, Shao-Yu Lien, Ying-Chang Liang, Kwang-Cheng Chen, and Xuemin Shen. 2022. “User Access Control in Open Radio Access Networks: A Federated Deep Reinforcement Learning Approach.” <em>IEEE Transactions on Wireless Communications</em> 21 (6): 3721–36. <a href="https://doi.org/10.1109/twc.2021.3123500">https://doi.org/10.1109/twc.2021.3123500</a>.</p>
</div>
<div id="ref-LENA2014">
<p>CTTC. 2014. “The LENA ns-3 LTE Module Documentation.” <a href="%20%7Bhttp://networks.cttc.es/wp-content/uploads/sites/2/2014/01/lena-lte-module-doc.pdf%7D">{http://networks.cttc.es/wp-content/uploads/sites/2/2014/01/lena-lte-module-doc.pdf}</a>.</p>
</div>
<div id="ref-Dryja_ski_2021">
<p>Dryjański, Marcin, Łukasz Kułacz, and Adrian Kliks. 2021. “Toward Modular and Flexible Open RAN Implementations in 6G Networks: Traffic Steering Use Case and O-RAN xApps.” <em>Sensors</em> 21 (24): 8173. <a href="https://doi.org/10.3390/s21248173">https://doi.org/10.3390/s21248173</a>.</p>
</div>
<div id="ref-Gabriel_2021">
<p>Gabriel, Caroline, and Roberto Kompany. 2021. “Open RAN: Ready for Prime Time?” Analysys Mason; <a href="https://www.analysysmason.com/contentassets/bf99e24c249e444fb5c03fdfd125aaa8/analysys_mason_open_ran_reality_apr2021_rdns0_rma18.pdf">https://www.analysysmason.com/contentassets/bf99e24c249e444fb5c03fdfd125aaa8/analysys_mason_open_ran_reality_apr2021_rdns0_rma18.pdf</a>; Analysys Mason.</p>
</div>
<div id="ref-ran-basic1">
<p>Habibi, Mohammad Asif, Meysam Nasimi, Bin Han, and Hans D. Schotten. 2019. “A Comprehensive Survey of Ran Architectures Toward 5G Mobile Communication System.” <em>IEEE Access</em> 7: 70371–70421. <a href="https://doi.org/10.1109/ACCESS.2019.2919657">https://doi.org/10.1109/ACCESS.2019.2919657</a>.</p>
</div>
<div id="ref-IMT_2020">
<p>ITU. 2017. “Minimum requirements related to technical performance for IMT-2020 radio interface(s).” <a href="https://www.itu.int/dms_pub/itu-r/opb/rep/R-REP-M.2410-2017-PDF-E.pdf">https://www.itu.int/dms_pub/itu-r/opb/rep/R-REP-M.2410-2017-PDF-E.pdf</a>.</p>
</div>
<div id="ref-Kumar_2020">
<p>Kumar, Hemant, Vivek Sapru, and Sandeep Kumar Jaisawal. 2020. “O-RAN Based Proactive ANR Optimization.” In <em>2020 IEEE Globecom Workshops (GC Workshops)</em>, 1–4. Taipei, Taiwan: IEEE. <a href="https://doi.org/10.1109/gcwkshps50303.2020.9367582">https://doi.org/10.1109/gcwkshps50303.2020.9367582</a>.</p>
</div>
<div id="ref-lacava2022programmable">
<p>Lacava, Andrea, Michele Polese, Rajarajan Sivaraj, Rahul Soundrarajan, Bhawani Shanker Bhati, Tarunjeet Singh, Tommaso Zugno, Francesca Cuomo, and Tommaso Melodia. 2022. “Programmable and Customized Intelligence for Traffic Steering in 5G Networks Using Open Ran Architectures.” <em>arXiv:2209.14171</em>.</p>
</div>
<div id="ref-testbed2">
<p>Niknam, Solmaz, Abhishek Roy, Harpreet S. Dhillon, Sukhdeep Singh, Rahul Banerji, Jeffery H. Reed, Navrati Saxena, and Seungil Yoon. 2020. “Intelligent O-Ran for Beyond 5G and 6G Wireless Networks.” https://arxiv.org/abs/2005.08374; arXiv. <a href="https://doi.org/10.48550/ARXIV.2005.08374">https://doi.org/10.48550/ARXIV.2005.08374</a>.</p>
</div>
<div id="ref-ORAN_ARCH">
<p>O-RAN Alliance. 2022a. “O-RAN Architecture Description v07.00.” <a href="https://orandownloadsweb.azurewebsites.net/download?id=310">https://orandownloadsweb.azurewebsites.net/download?id=310</a>.</p>
</div>
<div id="ref-ORAN_E2AP">
<p>———. 2022b. “O-RAN Near-Real-time RAN Intelligent Controller, E2 Application Protocol (E2AP) 2.02.” <a href="https://orandownloadsweb.azurewebsites.net/download?id=165">https://orandownloadsweb.azurewebsites.net/download?id=165</a>.</p>
</div>
<div id="ref-ORAN_E2SM_KPM">
<p>———. 2022c. “O-RAN Near-Real-time RAN Intelligent Controller, E2 Key Performance Metrics Service Model (E2SM-KPM) 2.02.” <a href="https://orandownloadsweb.azurewebsites.net/download?id=264">https://orandownloadsweb.azurewebsites.net/download?id=264</a>.</p>
</div>
<div id="ref-ORAN_E2SM_RC">
<p>———. 2022d. “O-RAN Near-Real-time RAN Intelligent Controller, E2 RAN Control Service Model (E2SM-RC) 1.02.” <a href="https://orandownloadsweb.azurewebsites.net/download?id=265">https://orandownloadsweb.azurewebsites.net/download?id=265</a>.</p>
</div>
<div id="ref-ORAN_E2GAP">
<p>———. 2022e. “O-RAN Near-Real-time RAN Intelligent Controller Architecture &amp; E2 General Aspects and Principles 2.02.” <a href="https://orandownloadsweb.azurewebsites.net/download?id=262">https://orandownloadsweb.azurewebsites.net/download?id=262</a>.</p>
</div>
<div id="ref-ORAN_usecased">
<p>———. 2022f. “O-RAN Use Cases Detailed Specification v09.00.” <a href="https://https://orandownloadsweb.azurewebsites.net/specifications">https://https://orandownloadsweb.azurewebsites.net/specifications</a>.</p>
</div>
<div id="ref-Papa_2022">
<p>Papa, Arled, Polina Kutsevol, Fidan Mehmeti, and Wolfgang Kellerer. 2022. “Effects of SD-RAN Control Plane Design on User Quality of Service.” In <em>2022 IEEE 8th International Conference on Network Softwarization (NetSoft)</em>. IEEE. <a href="https://doi.org/10.1109/netsoft54395.2022.9844029">https://doi.org/10.1109/netsoft54395.2022.9844029</a>.</p>
</div>
<div id="ref-Polese2022UnderstandingOA">
<p>Polese, Michele, Leonardo Bonati, Salvatore D’oro, Stefano Basagni, and Tommaso Melodia. 2022. “Understanding O-Ran: Architecture, Interfaces, Algorithms, Security, and Research Challenges.” <em>ArXiv</em> abs/2202.01032.</p>
</div>
<div id="ref-Haryo_Prananto_2022">
<p>Prananto, Baud Haryo, Iskandar, and Adit Kurniawan. 2022. “O-RAN Intelligent Application for Cellular Mobility Management.” In <em>2022 International Conference on ICT for Smart Society (ICISS)</em>. IEEE. <a href="https://doi.org/10.1109/iciss55894.2022.9915221">https://doi.org/10.1109/iciss55894.2022.9915221</a>.</p>
</div>
<div id="ref-testbeds1">
<p>Solis, Priscila, Gabriel C Ferreira, Raimundo Guimarães Saraiva Jr., and Paulo Henrique Portela de Carvalho. 2022. “Uma análise Do Open RAN E Os Desafios Da Sua Experimentação Em Plataformas de código Aberto.” In <em>Anais Do XL Simpósio Brasileiro de Telecomunicações E Processamento de Sinais</em>. Sociedade Brasileira de Telecomunicações. <a href="https://doi.org/10.14209/sbrt.2022.1570824548">https://doi.org/10.14209/sbrt.2022.1570824548</a>.</p>
</div>
<div id="ref-Tayyab_2019">
<p>Tayyab, Muhammad, Xavier Gelabert, and Riku Jantti. 2019. “A Survey on Handover Management: From LTE to NR.” <em>IEEE Access</em> 7: 118907–30. <a href="https://doi.org/10.1109/access.2019.2937405">https://doi.org/10.1109/access.2019.2937405</a>.</p>
</div>
<div id="ref-ORAN_trials">
<p>TECKNEXUS. 2022. “Current State of Open RAN-Countries and Operator Delployin and Trailing Open RAN.” <a href="https://tecknexus.com/5g-network/current-state-of-open-ran-countries-operators-deploying-trialing-open-ran/">https://tecknexus.com/5g-network/current-state-of-open-ran-countries-operators-deploying-trialing-open-ran/</a>.</p>
</div>
<div id="ref-open-ran-market">
<p>Wypiór, Dariusz, Miroslaw Klinkowski, and Igor Michalski. 2022. “Open Ran—Radio Access Network Evolution, Benefits and Market Trends.” <em>Applied Sciences</em> 12 (January): 1–18. <a href="https://doi.org/10.3390/app12010408">https://doi.org/10.3390/app12010408</a>.</p>
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>https://www.o-ran.org<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
